<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
  -->
<htmlform>
    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <style>
        .simple-table {
            border: solid 1px #DDEEEE;
            border-collapse: collapse;
            border-spacing: 0;
            font: normal 13px Arial, sans-serif;
        }

        .simple-table thead th {
            background-color: #DDEFEF;
            border: solid 1px #DDEEEE;
            color: #336B6B;
            padding: 10px;
            text-align: left;
            text-shadow: 1px 1px 1px #fff;
        }

        .simple-table td {
            border: solid 1px #DDEEEE;
            color: #333;
            padding: 10px;
            text-shadow: 1px 1px 1px #fff;
        }
    </style>
    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <script>
      var FirstDiscontinuation  = function () {
              var discontinue = getValue('treatment-plan1.value');
             if(discontinue=="1260"){
			   $('#discontinue1 select').attr('disabled', false);
                   }
                else if (discontinue != "1260"){

                $("#discontinue1 select").attr('disabled', 'disabled');
                $("#discontinue1 select").val("Select");
                }
            }
                var SecondDiscontinuation  = function () {
            var discontinue = getValue('treatment-plan2.value');
             if(discontinue=="1260"){
				   $('#discontinue2 select').attr('disabled', false);
                   }
                else if (discontinue != "1260"){

                $("#discontinue2 select").attr('disabled', 'disabled');
                $("#discontinue2 select").val("Select");
                }
            }
                var ThirdDiscontinuation  = function () {
              var discontinue = getValue('treatment-plan3.value');
             if(discontinue=="1260"){
				 $('#discontinue3 select').attr('disabled', false);
                   }
                else if (discontinue != "1260"){

                $("#discontinue3 select").attr('disabled', 'disabled');
                $("#discontinue3 select").val("Select");
                }
            }


             var FourthDiscontinuation  = function () {
            var discontinue = getValue('treatment-plan4.value');
           if (discontinue == "1260"){
                    $('#discontinue4 select').attr('disabled', false);
                   }
                else if (discontinue != "1260"){

                $("#discontinue4 select").attr('disabled', 'disabled');
                $("#discontinue4 select").val("Select");

            }
		}

		  var SpecifyFirstDiscontinuation  = function () {
            var discontinue = getValue('discontinue1.value');
           if (discontinue == "5622"){
                 $('#specify1 input').prop('disabled', false);
                   }
                else if (discontinue != "5622"){
                    $('#specify1 input').prop('disabled', true);
                    $('#specify1 input').val('');
            }
		}
		  var SpecifySecondDiscontinuation  = function () {
            var discontinue = getValue('discontinue2.value');
           if (discontinue == "5622"){
                 $('#specify2 input').prop('disabled', false);
                   }
                else if (discontinue != "5622"){
                    $('#specify2 input').prop('disabled', true);
                    $('#specify2 input').val('');
            }
		}

		  var SpecifyThirdDiscontinuation  = function () {
            var discontinue = getValue('discontinue3.value');
           if (discontinue == "5622"){
                 $('#specify3 input').prop('disabled', false);
                   }
                else if (discontinue != "5622"){
                    $('#specify3 input').prop('disabled', true);
                    $('#specify3 input').val('');
            }
		}

		  var SpecifyFourthDiscontinuation  = function () {
            var discontinue = getValue('discontinue4.value');
           if (discontinue == "5622"){
                 $('#specify4 input').prop('disabled', false);
                   }
                else if (discontinue != "5622"){
                    $('#specify4 input').prop('disabled', true);
                    $('#specify4 input').val('');
            }
		}



$(document).ready(function () {


jq("#discontinue1 select").attr('disabled', 'disabled');
jq("#discontinue2 select").attr('disabled', 'disabled');
jq("#discontinue3 select").attr('disabled', 'disabled');
jq("#discontinue4 select").attr('disabled', 'disabled');

$('#specify1 input').prop('disabled', true);
$('#specify2 input').prop('disabled', true);
$('#specify3 input').prop('disabled', true);
$('#specify4 input').prop('disabled', true);

            $('#treatment-plan1').click(FirstDiscontinuation);
			$('#treatment-plan2').click(SecondDiscontinuation);
			$('#treatment-plan3').click(ThirdDiscontinuation);
			$('#treatment-plan4').click(FourthDiscontinuation);

			$('#discontinue1').click(SpecifyFirstDiscontinuation);
			$('#discontinue2').click(SpecifySecondDiscontinuation);
			$('#discontinue3').click(SpecifyThirdDiscontinuation);
			$('#discontinue4').click(SpecifyFourthDiscontinuation);

});

</script>

    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Date:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td>Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">
        <ifMode mode="EDIT">
            <script type="text/javascript">
                jq(function(){
                    var val = getValue('referred.value');
                    if(val == 1272){
                        jq("#referred-specify").show();
                    }
                    else{
                        jq("#referred-specify").hide();
                        jq('#referred-specify input').val('');
                    }
                });

            </script>
        </ifMode>
        <!--Peer Educator/ORW Overdose Encounter Reporting Tool-->
        <fieldset id="prep_verification_form">
            <legend>
                Prep History
            </legend>
            <table class="simple-table" id="overdose-reporting-tool">
                <tr>
                    <td><b>Initial visit Date</b></td>
                    <td>
                        <obs id="incident_date" conceptId="163526" allowFutureDates="false"  />
                        <span class="value"><recentObs conceptId="163526AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>

                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Name of health facility accessing PrEP</b>
                    </td>
                    <td> <obs id="health-facility" conceptId="162724"
                               required="true"/>
                        <span class="value" ></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Is a PEPFAR site</b>
                    </td>
                    <td ><p>  <obs id="received_results" conceptId="1768"
                                   answerConceptIds="1065,
                                                            1066,1067"  answerLabels="Yes,No, Unknown"
                                   style="radio" answerSeparator="&lt;br /&gt;"  />
                    </p>
                        <span class="value"><recentObs conceptId="1768AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>

                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Date initiated on PrEP </b>
                    </td>

                    <td><obs conceptId="160555" id="first-enrolled-date"/>
                        <span class="value"><recentObs conceptId="160555AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>

                    </td>


                </tr>
                <tr>
                    <td>
                        <b>PrEP Regimen</b>
                    </td>
                    <td id="regimen-options"><obs conceptId="164515" labelText=" " answerConceptIds="161364AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
						84795AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,104567AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                  answerLabels="TDF/3TC,TDF,TDF/FTC(Preferred)" required="true" />
                        <span class="value"><recentObs conceptId="164515AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>

                    </td>
                </tr>

                <tr>
                    <td>
                        <b>Source information</b>
                    </td>
                    <td id="regimen-options"><obs conceptId="162568" labelText=" " answerConceptIds="163787,
						1662,1650,1238,162969,160526"
                                                  answerLabels="Verbal Report,Appointment Card,Phone Call, Written Record, Sms, EID Dashboard" />

                        <span class="value"><recentObs conceptId="162568AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></span>

                    </td>

                </tr>
            </table>
        </fieldset>

        <fieldset id="prep_appointment">
            <legend>Prep Appointment</legend>
            <table class="simple-table">
                <tr>
                    <td ><p><b>Verification Date</b></p></td>
                    <td ><p><b>PrEP Status</b></p></td>
                    <td ><p><b>PrEP Discontinuation Reasons</b></p></td>
                    <td ><p><b>Specify</b></p></td>
                    <td ><p><b>Next PrEP Appointment</b></p></td>

                </tr>
                <tr>
                    <td>
                        <obs id="verification_date" conceptId="5096" allowFutureDates="false"  />
                    </td>
                    <td>
                        <obs conceptId="165109" id="treatment-plan1"
                             answerConceptIds="1256AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1257AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,162904AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1260AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Start,Continue,Restart,Discontinue"   answerSeparator="&lt;br /&gt;"
                             style="radio" />
                    </td>
                    <td><obs id="discontinue1" conceptId="161555" labelText=" "   answerConceptIds="138571AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
						1302AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
						159598AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,164401AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
						162696AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,
						5622"
                             answerLabels="HIV test is positive,Viral suppression of HIV+ Partner,
							 Not adherent to PrEP,Too many HIV tests,Client request,
							 Other-specify"  style="dropdown"/>
                    <td><obs conceptId="165230" id="specify1"/></td>

                    </td>
                    <td id="next-appointment-date"><obs id="next-appointment" conceptId="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="true"/></td>

                </tr>
            </table>

        </fieldset>
    </div>
    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>